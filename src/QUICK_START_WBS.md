# WBS 自动化功能快速上手指南

## 🚀 快速开始

### 步骤 1：进入指标拆解页面

1. 启动应用后，默认进入**权衡分析**页面
2. 点击顶部进度条中的**"2. 指标拆解仿真"**

### 步骤 2：查看指标拓扑图

在页面上方，你会看到完整的指标拓扑图，展示了从顶层目标（G1）到具体 KPI 的完整分解链路：

```
G1: 方向盘折叠体验与安全优化
├─ 交互体验 (Experience)
│  ├─ KPI_FoldTime: 折叠时间
│  └─ KPI_FoldAngle: 折叠角度
├─ 空间布置 (Package)
│  └─ KPI_SpaceGain: 空间提升
├─ 功能安全 (Safety)
│  └─ KPI_LockSafe: 锁止安全
├─ 声振品质 (NVH)
│  └─ KPI_NVH: NVH性能
└─ 可靠耐久 (Reliability)
   └─ KPI_Life: 折叠寿命
```

### 步骤 3：探索 WBS 自动化模块

在页面下方，你会看到**"WBS 自动化"**模块，它提供两种视图：

#### 📊 视图 1：指标→任务→模型

**用途**：查看每个 KPI 如何分解为具体的研发任务和仿真模型

**操作方法**：
1. 点击任意 KPI 行（如 `KPI_LockSafe`）展开详情
2. 查看**任务列表**：
   - 任务名称、类型（CAE/Test/Design等）
   - 优先级（High/Medium/Low）
   - 预估工期（天数）
3. 查看**关联模型**：
   - 模型名称和软件
   - 模型类型和用途描述
4. 点击具体任务可查看详细描述和依赖关系

**示例**：
```
KPI_LockSafe（锁止安全性）
├─ 任务列表
│  ├─ 机械结构 CAE 仿真 (15天, High)
│  ├─ 锁止机构寿命验证 (20天, High) [依赖: 任务1]
│  ├─ 力学模型创建 (10天, Medium)
│  └─ 冲击载荷验证 (12天, High) [依赖: 任务1]
└─ 关联模型
   ├─ Abaqus 非线性分析模型 (FEA)
   └─ Adams 多体动力学模型 (MBD)
```

#### 🌲 视图 2：WBS 结构树

**用途**：查看整个项目的工作分解结构

**操作方法**：
1. 点击顶部的 **"WBS 结构树"** 按钮切换视图
2. 展开/折叠各级节点查看详情
3. 查看每个子系统的团队、负责人和工期
4. 识别正在进行和计划中的任务（通过状态图标）

**结构层级**：
```
折叠方向盘研发 WBS
├─ 折叠机构设计 (机构设计组)
│  ├─ CAD 模型构建 (2周, 张工) [进行中]
│  ├─ 结构强度验证 (3周, 张工) [计划中] → KPI_LockSafe
│  └─ 折叠轨迹仿真 (2周, 赵工) [计划中] → KPI_SpaceGain
├─ 执行器系统 (电控设计组)
│  ├─ Modelica 动力学建模 (2周, 李工) [进行中] → KPI_FoldTime
│  ├─ 折叠时间验证 (1.5周, 李工) [计划中] → KPI_FoldTime
│  └─ 控制策略评估 (2周, 钱工) [计划中] → KPI_FoldAngle
├─ 安全系统 (整车安全组)
│  ├─ 碰撞约束力验证 (3周, 张工) [计划中] → KPI_LockSafe
│  └─ 法规一致性检查 (1周, 周工) [计划中] → KPI_LockSafe
├─ NVH 评估 (NVH 团队)
│  ├─ 噪声评估 (2周, 王工) [计划中] → KPI_NVH
│  └─ 振动测试 (3周, 王工) [计划中] → KPI_NVH
└─ 耐久性验证 (CAE 强度/耐久组)
   ├─ 疲劳寿命分析 (2.5周, 孙工) [计划中] → KPI_Life
   └─ 耐久性台架测试 (6周, 孙工) [计划中] → KPI_Life
```

## 💡 实用技巧

### 技巧 1：快速定位关键任务

在**指标→任务→模型**视图中：
- 红色的 `High` 标签表示高优先级任务
- 有 ⚠️ 图标的任务表示存在依赖关系
- 优先关注高优先级且有依赖的任务

### 技巧 2：识别任务依赖关系

点击展开任务卡片，查看底部的依赖信息：
- "依赖: TASK_LockCAE" 表示该任务需要等待前置任务完成

### 技巧 3：了解模型选型

查看**关联模型**部分，了解：
- 使用什么仿真软件（如 Abaqus 2023, Simulink）
- 模型类型（FEA, MBD, Control 等）
- 模型的具体用途

### 技巧 4：跨团队协作视角

在 **WBS 结构树**视图中：
- 通过团队标签快速识别各团队负责的子系统
- 查看底部的"团队配置"了解全部参与团队
- 根据 KPI 标签追溯任务到指标的关联

## 📈 统计数据

当前系统自动生成的 WBS 包含：

| 指标 | 数据 |
|------|------|
| KPI 数量 | 6 个 |
| 总任务数 | 18 个 |
| 总模型数 | 11 个 |
| 预估总工期 | 194 天 |
| 高优先级任务 | 11 个 |
| 参与团队 | 6 个 |

## 🎯 典型使用场景

### 场景 1：项目经理查看整体进度

**目标**：了解项目整体任务分布和进度

**步骤**：
1. 切换到 **WBS 结构树**视图
2. 查看各子系统的状态图标
3. 识别正在进行（蓝色时钟）和计划中（灰色）的任务
4. 评估资源分配是否合理

### 场景 2：工程师查看具体任务

**目标**：了解某个 KPI 需要完成哪些具体工作

**步骤**：
1. 使用 **指标→任务→模型**视图
2. 找到目标 KPI（如 KPI_NVH）
3. 点击展开查看任务列表
4. 点击具体任务查看详细描述和依赖关系
5. 查看需要使用的仿真模型和软件

### 场景 3：团队负责人分配任务

**目标**：确认团队需要完成的任务及排期

**步骤**：
1. 使用 **WBS 结构树**视图
2. 展开自己团队负责的子系统
3. 查看每个任务的负责人和工期
4. 识别任务之间的关联（通过 KPI 标签）
5. 调整资源分配

### 场景 4：技术评审会议

**目标**：向团队展示从指标到任务的完整链路

**步骤**：
1. 先展示上方的**指标拓扑图**，说明指标分解逻辑
2. 切换到 **指标→任务→模型**视图，逐个 KPI 说明任务安排
3. 强调高优先级和有依赖的关键任务
4. 切换到 **WBS 结构树**视图，展示整体研发计划
5. 讨论资源分配和排期合理性

## ⚙️ 自定义扩展

### 如何添加新的 KPI 映射

编辑 `/data/wbsData.ts`，在 `kpiToTaskMapping` 中添加新条目：

```typescript
KPI_YourNewKPI: {
  id: 'WBS_YourNewKPI',
  name: 'Your KPI Name',
  kpiId: 'KPI_YourNewKPI',
  owner: '负责人',
  team: '团队名称',
  startWeek: 1,
  duration: 8,
  tasks: [
    {
      id: 'TASK_YourTask',
      name: 'Your Task Name',
      description: 'Task description',
      type: 'CAE', // 或 Design, Test, Validation, Control
      estimatedDays: 10,
      priority: 'High', // 或 Medium, Low
      dependencies: [], // 可选：依赖的任务ID数组
    },
    // 更多任务...
  ],
  models: [
    {
      id: 'MODEL_YourModel',
      name: 'Your Model Name',
      type: 'Model Type',
      software: 'Software Name',
      description: 'Model description',
    },
    // 更多模型...
  ],
},
```

### 如何修改 WBS 结构树

编辑 `/data/wbsData.ts`，修改 `wbsTree` 对象的结构。

## 🆘 常见问题

**Q: 为什么有些任务显示依赖关系？**
A: 这表示该任务需要等待其他任务完成后才能开始。依赖关系由系统根据工程逻辑自动识别。

**Q: 如何判断任务的优先级？**
A: 查看任务卡片上的优先级标签：
- 红色 `High`：高优先级，需要优先完成
- 黄色 `Medium`：中等优先级
- 灰色 `Low`：低优先级

**Q: 模型和任务是如何关联的？**
A: 每个 KPI 的任务会自动关联相应的仿真模型。模型用于支持任务的执行（如 CAE 分析需要 FEA 模型）。

**Q: WBS 数据可以导出吗？**
A: 当前版本暂不支持导出。未来版本将支持导出到 Excel/MS Project。

## 📚 相关文档

- [WBS 自动化详细说明](./WBS_AUTOMATION_README.md)
- [权衡分析工作流指南](./TRADEOFF_ANALYSIS_README.md)
- [交互工作流指南](./INTERACTIVE_WORKFLOW_GUIDE.md)

---

**提示**：WBS 自动化功能完全基于真实的新能源汽车折叠方向盘指标体系设计，可直接应用于实际研发项目。
