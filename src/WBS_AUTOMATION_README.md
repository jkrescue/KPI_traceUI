# WBS 自动化功能说明

## 功能概述

在"ZD方向盘"全链路指标可视化应用的基础上，新增了**指标 → 任务 → 模型**的自动分解功能（WBS自动化），用于支持跨团队协作的研发任务管理。

## 核心特性

### 1. 指标自动分解到任务
- 系统根据每个 KPI 指标自动匹配相应的任务模板
- 任务类型包括：CAE 仿真、设计、测试、验证、控制策略
- 自动识别任务依赖关系，确保执行顺序合理

### 2. 任务自动绑定模型
- 每个任务自动关联相应的仿真模型
- 支持多种仿真软件：Abaqus、Modelica、Nastran、CATIA、Simulink 等
- 模型类型包括：FEA、系统动力学、声学分析、人机工程等

### 3. WBS 结构树展示
- 完整的工作分解结构（Work Breakdown Structure）
- 三层层级：系统 → 子系统 → 具体任务
- 清晰的团队分工和责任人分配

### 4. 自动任务排期
- 自动计算任务工期
- 显示任务开始周次和持续时间
- 任务状态跟踪（进行中/计划中/已完成）

## 使用指南

### 访问 WBS 功能

1. 进入**步骤2：指标拆解仿真**
2. 在页面下方找到"WBS 自动化"模块
3. 可在两种视图间切换：
   - **指标→任务→模型**：展示每个 KPI 对应的任务和模型
   - **WBS 结构树**：展示完整的研发任务层级结构

### 指标→任务→模型视图

- 点击任意 KPI 可展开查看详细的任务列表和关联模型
- 任务卡片显示：
  - 任务名称和描述
  - 任务类型（CAE/Test/Design/Validation/Control）
  - 优先级（High/Medium/Low）
  - 预估工期（天数）
  - 依赖关系
- 模型卡片显示：
  - 模型名称和描述
  - 使用软件
  - 模型类型

### WBS 结构树视图

- 展示完整的研发任务分解结构
- 三个主要子系统：
  - 折叠机构设计（机构设计组）
  - 执行器系统（电控设计组）
  - 安全系统（整车安全组）
  - NVH 评估（NVH 团队）
  - 耐久性验证（CAE 强度/耐久组）
- 每个任务显示：
  - 责任人
  - 工期
  - 状态
  - 关联的 KPI

## 数据结构

### KPI 到任务的映射

系统内置了6个核心 KPI 的任务分解：

| KPI ID | KPI 名称 | 任务数量 | 负责团队 |
|--------|----------|----------|----------|
| KPI_LockSafe | 锁止安全性 | 4 | 机构设计组 |
| KPI_FoldTime | 折叠时间 | 3 | 电控设计组 |
| KPI_NVH | NVH 性能 | 3 | NVH 团队 |
| KPI_SpaceGain | 空间提升 | 3 | 整车布置组 |
| KPI_FoldAngle | 折叠角度 | 2 | 电控设计组 |
| KPI_Life | 折叠寿命 | 3 | CAE 强度/耐久组 |

### 团队配置

- **机构设计组**：负责折叠机构设计、结构强度验证
- **电控设计组**：负责控制策略、动力学仿真
- **NVH 团队**：负责噪声和振动评估
- **CAE 强度/耐久组**：负责疲劳寿命分析和耐久性测试
- **整车安全组**：负责碰撞安全验证和法规检查
- **整车布置组**：负责空间布置和人机工程验证

## 技术实现

### 新增文件

1. **`/data/wbsData.ts`**
   - 定义了指标到任务的映射关系
   - 包含完整的 WBS 结构树数据
   - 团队和模型配置信息

2. **`/components/WBSDecomposition.tsx`**
   - WBS 可视化组件
   - 支持双视图切换
   - 可展开/折叠的树形结构

### 集成方式

在 `TradeoffAnalysis.tsx` 的 Step 2（指标拆解仿真）中集成：
- 保持原有的指标拓扑图和 KPI 目标仿真功能
- 在下方增加 WBS 自动化模块
- 完全不影响现有功能

## 应用场景

### 场景示例：锁止保持力指标分解

**指标**：锁止保持力 ≥ 1500N

**自动生成任务**：
1. 机械结构 CAE 仿真（15天，高优先级）
2. 锁止机构寿命验证（20天，高优先级，依赖任务1）
3. 力学模型创建（10天，中优先级）
4. 冲击载荷验证（12天，高优先级，依赖任务1）

**自动绑定模型**：
- Abaqus 非线性分析模型（FEA）
- Adams 多体动力学模型（MBD）

**任务排期**：
- 开始周次：第1周
- 总工期：8周
- 责任人：张工（机构设计组）

## 设计理念

1. **自动化优先**：减少手动配置，系统自动匹配任务和模型
2. **可视化清晰**：两种视图满足不同的查看需求
3. **保持一致**：与现有的商务深色风格完全一致
4. **不破坏原有**：纯增量式开发，不修改任何现有功能

## 未来扩展

- [ ] 支持自定义任务模板
- [ ] 集成甘特图展示任务排期
- [ ] 任务进度实时更新
- [ ] 资源冲突检测和预警
- [ ] 导出 WBS 到 Excel/MS Project
- [ ] 任务成本估算
- [ ] 跨项目资源协调

## 总结

WBS 自动化功能为"ZD方向盘"系统增加了从指标到执行的完整链路，实现了：
- ✅ 指标分解自动化
- ✅ 任务模板自动匹配
- ✅ 模型绑定自动关联
- ✅ WBS 结构可视化
- ✅ 团队责任明确化
- ✅ 任务排期合理化

这为跨团队的复杂研发项目提供了清晰的任务管理和执行路径。
